# 🌱 마음일기 (MaumDiary) — 개발 기획서

> **초등학생 감정 피드 & 일일 계획 관리 SaaS**
> 작성일: 2026.02.27 | 버전: v1.0

---

## 1. 프로젝트 개요

### 1.1 서비스 정의

"마음일기(MaumDiary)"는 초등학교 교사가 학급을 운영하며, 학생들의 **감정 표현**과 **일일 계획 실천**을 체계적으로 관리할 수 있는 교육용 SaaS 플랫폼이다.

### 1.2 핵심 가치

- **감정 공유**: 학생들이 매일 자신의 감정을 인스타그램 스타일의 피드로 공유하고, 같은 학급 친구들과 소통한다.
- **계획 실천**: 학생 스스로 세운 계획을 매일 체크하며 자기주도 습관을 형성한다.
- **교사 모니터링**: 교사가 학급 전체와 개별 학생의 감정 상태 및 계획 달성률을 한눈에 파악한다.

### 1.3 대상 사용자

| 사용자 | 설명 |
|--------|------|
| **교사** | 학급 개설, 학생 계정 관리, 감정 피드 확인, 계획 달성률 모니터링 |
| **학생** | 감정 피드 작성/열람, 일일 계획 체크, 본인 달성률 확인 |

---

## 2. 사용자 흐름 (User Flow)

### 2.1 교사 흐름

```
회원가입/로그인
    └─→ 학급 생성 (학급명, 학년/반)
         └─→ 학생 계정 생성 (이름, 번호 입력 → 자동 로그인 코드 생성)
              └─→ 대시보드
                   ├─→ [감정 피드 탭] 학생 감정 피드 전체 열람 & 코멘트
                   ├─→ [계획 관리 탭] 학생별 계획 달성 현황 확인
                   └─→ [통계 탭] 개별/전체 달성률 그래프 확인
```

### 2.2 학생 흐름

```
로그인 (학급코드 + 본인 번호)
    └─→ 홈 화면
         ├─→ [오늘의 감정] 감정 피드 작성 (이모지 + 한 줄 글 + 이미지)
         ├─→ [감정 타임라인] 같은 반 친구들 피드 열람 & 응원 반응
         ├─→ [오늘의 계획] 등록된 계획 목록 → 체크 표시
         └─→ [나의 기록] 월간 달성률 그래프 확인
```

---

## 3. 주요 기능 상세

### 3.1 교사 기능

#### 3.1.1 회원가입 / 로그인

- 이메일 + 비밀번호 기반 회원가입
- 소셜 로그인 (Google) 지원
- 비밀번호 재설정 기능

#### 3.1.2 학급 관리

- 학급 생성: 학급명, 학년, 반 입력
- 학급 코드 자동 생성 (학생 로그인 시 사용)
- 학급 정보 수정 / 학급 삭제 (학기 종료 시)
- 다중 학급 운영 가능

#### 3.1.3 학생 계정 관리

- 학생 등록: **이름 + 출석번호** 입력
- 일괄 등록: CSV 업로드 지원
- 학생별 로그인 코드 자동 생성 (숫자 4자리 PIN)
- 학생 정보 수정 / 삭제
- 학생 PIN 초기화

#### 3.1.4 감정 피드 모니터링

- 학급 전체 감정 피드 타임라인 열람
- 학생별 감정 피드 필터링
- 감정 유형별 필터 (기쁨, 슬픔, 화남, 불안, 평온 등)
- 교사 코멘트 작성 기능
- 부적절한 피드 비공개 처리 기능
- **감정 알림**: 부정적 감정(슬픔, 화남, 불안)이 연속 3일 이상 지속되면 교사에게 알림

#### 3.1.5 계획 달성 모니터링

- 학생별 계획 등록 현황 확인
- 학생별 일일 체크 현황 확인
- 전체 학급 오늘의 달성률 요약
- **월간 리포트**: 학생별 / 전체 달성률 그래프

#### 3.1.6 통계 대시보드

- **개별 학생 뷰**: 학생 선택 → 계획별 월간 달성률 그래프
- **학급 전체 뷰**: 전체 평균 달성률, 계획별 달성 순위, 감정 분포 차트
- 기간 필터: 주간 / 월간 / 학기 단위
- 그래프 유형: 막대 그래프, 라인 차트, 도넛 차트
- PDF / 이미지 내보내기 기능

---

### 3.2 학생 기능

#### 3.2.1 로그인

- **학급코드 + 출석번호 + PIN** 으로 간편 로그인
- 비밀번호 없이 교사가 발급한 코드로 접속
- 자동 로그인 유지 (기기별)

#### 3.2.2 감정 피드 (인스타그램 스타일)

- **피드 작성**
  - 감정 이모지 선택 (8종: 😊기쁨 😢슬픔 😠화남 😰불안 😌평온 🤔고민 😆신남 😴피곤)
  - 한 줄 텍스트 입력 (최대 100자)
  - 이미지 첨부 (선택, 최대 1장)
  - 하루 최대 3개 피드 작성 가능
- **피드 타임라인**
  - 같은 학급 친구들의 감정 피드 열람
  - 최신순 정렬
  - 응원 반응 보내기 (❤️ 하트, 👍 최고, 🤗 응원, 💪 힘내 — 4종)
  - 댓글 기능 없음 (안전한 환경 유지, 반응만 가능)
- **내 피드 관리**
  - 본인 피드 삭제 가능
  - 본인 감정 기록 히스토리 확인

#### 3.2.3 일일 계획 관리

- **계획 등록**
  - 학생 본인이 직접 계획 등록 (예: "책 30분 읽기", "줄넘기 100개")
  - 최대 5개 계획 등록 가능
  - 계획 수정 / 삭제 (당일에만 가능)
- **매일 리프레시**
  - 매일 자정(00:00) 기준 체크 상태 초기화
  - 등록된 계획 목록은 유지, 체크만 리셋
  - 오늘 날짜의 계획 체크 화면이 기본 노출
- **계획 체크**
  - 각 계획 항목 옆 체크박스 터치로 완료 표시
  - 완료 시 작은 축하 애니메이션
  - 오늘의 달성률 표시 (예: 3/5 완료 — 60%)

#### 3.2.4 나의 기록 (달성률 그래프)

- 월간 달성률 캘린더 히트맵 (달성률에 따라 색상 변화)
- 계획별 월간 달성률 막대 그래프
- 주간 추이 라인 차트
- 연속 달성일 카운트 표시 (스트릭)

---

## 4. 화면 구성 (Wireframe 가이드)

### 4.1 교사 화면

| 화면 | 주요 요소 |
|------|----------|
| **로그인/회원가입** | 이메일 입력, 비밀번호, Google 소셜 로그인 버튼 |
| **학급 관리** | 학급 목록 카드, 학급 추가 버튼, 학급코드 표시 |
| **학생 관리** | 학생 리스트 테이블 (번호, 이름, PIN), 학생 추가/일괄등록 버튼 |
| **감정 피드 모니터링** | 피드 타임라인 (카드형), 감정 필터 칩, 학생 필터 드롭다운 |
| **계획 현황** | 학생별 오늘의 체크 현황 테이블, 달성률 프로그레스 바 |
| **통계 대시보드** | 탭 전환(개별/전체), 기간 선택, 그래프 영역, 내보내기 버튼 |

### 4.2 학생 화면

| 화면 | 주요 요소 |
|------|----------|
| **로그인** | 학급코드 입력, 출석번호 선택, PIN 입력 |
| **홈** | 오늘의 감정 카드 (작성 유도), 오늘의 계획 요약, 빠른 액션 버튼 |
| **감정 피드** | 인스타그램 스타일 카드 피드, 이모지 반응 버튼, 피드 작성 FAB 버튼 |
| **감정 작성** | 이모지 선택 그리드, 텍스트 입력, 이미지 첨부, 게시 버튼 |
| **오늘의 계획** | 계획 리스트 + 체크박스, 달성률 프로그레스, 계획 추가 버튼 |
| **나의 기록** | 캘린더 히트맵, 계획별 막대 그래프, 스트릭 카운트 |

---

## 5. 데이터 모델 (ERD 개요)

### 5.1 주요 엔티티

```
[Teacher]
  - id (PK)
  - email
  - password_hash
  - name
  - created_at

[Class]
  - id (PK)
  - teacher_id (FK → Teacher)
  - class_name
  - grade
  - section
  - class_code (UNIQUE, 자동생성)
  - created_at

[Student]
  - id (PK)
  - class_id (FK → Class)
  - name
  - student_number
  - pin_code
  - created_at

[EmotionFeed]
  - id (PK)
  - student_id (FK → Student)
  - emotion_type (ENUM: joy, sad, angry, anxious, calm, thinking, excited, tired)
  - content (VARCHAR 100)
  - image_url (NULLABLE)
  - is_visible (BOOLEAN, DEFAULT true)
  - created_at

[FeedReaction]
  - id (PK)
  - feed_id (FK → EmotionFeed)
  - student_id (FK → Student)
  - reaction_type (ENUM: heart, thumbsup, hug, fighting)
  - created_at
  - UNIQUE(feed_id, student_id)  -- 피드당 1인 1반응

[Plan]
  - id (PK)
  - student_id (FK → Student)
  - title (VARCHAR 50)
  - is_active (BOOLEAN, DEFAULT true)
  - created_at

[PlanCheck]
  - id (PK)
  - plan_id (FK → Plan)
  - check_date (DATE)
  - is_completed (BOOLEAN)
  - checked_at (TIMESTAMP)
  - UNIQUE(plan_id, check_date)  -- 날짜별 1회 체크

[TeacherComment]
  - id (PK)
  - teacher_id (FK → Teacher)
  - feed_id (FK → EmotionFeed)
  - content (VARCHAR 200)
  - created_at
```

### 5.2 주요 관계

- Teacher 1 : N Class (교사 한 명이 여러 학급 운영)
- Class 1 : N Student (학급 하나에 여러 학생)
- Student 1 : N EmotionFeed (학생 한 명이 여러 감정 피드)
- Student 1 : N Plan (학생 한 명이 여러 계획)
- Plan 1 : N PlanCheck (계획 하나에 날짜별 체크 기록)
- EmotionFeed 1 : N FeedReaction (피드 하나에 여러 반응)
- EmotionFeed 1 : N TeacherComment (피드 하나에 교사 코멘트)

---

## 6. 기술 스택 (권장)

### 6.1 프론트엔드

| 항목 | 기술 | 선정 이유 |
|------|------|----------|
| 프레임워크 | **Next.js 14 (App Router)** | SSR/SSG 지원, SEO, 빠른 페이지 전환 |
| UI 라이브러리 | **Tailwind CSS + shadcn/ui** | 빠른 UI 개발, 일관된 디자인 시스템 |
| 상태관리 | **Zustand** | 가볍고 직관적인 전역 상태 관리 |
| 차트 | **Recharts** | React 친화적, 다양한 그래프 유형 지원 |
| 폼 관리 | **React Hook Form + Zod** | 유효성 검사 및 타입 안전성 |

### 6.2 백엔드

| 항목 | 기술 | 선정 이유 |
|------|------|----------|
| 프레임워크 | **Next.js API Routes** 또는 **Supabase** | 풀스택 통합, 빠른 개발 |
| 인증 | **Supabase Auth** 또는 **NextAuth.js** | 교사 인증 + 학생 커스텀 인증 |
| 데이터베이스 | **Supabase (PostgreSQL)** | RLS 지원, 실시간 기능, 무료 티어 |
| 스토리지 | **Supabase Storage** | 이미지 업로드 (감정 피드) |
| 스케줄러 | **Supabase Edge Functions + pg_cron** | 매일 자정 PlanCheck 리셋 |

### 6.3 인프라

| 항목 | 기술 |
|------|------|
| 호스팅 | **Vercel** |
| 도메인 | 커스텀 도메인 (예: maumdiary.kr) |
| CDN | Vercel Edge Network |
| 모니터링 | Vercel Analytics |

---

## 7. API 설계 (주요 엔드포인트)

### 7.1 인증

| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/api/auth/teacher/signup` | 교사 회원가입 |
| POST | `/api/auth/teacher/login` | 교사 로그인 |
| POST | `/api/auth/student/login` | 학생 로그인 (학급코드 + 번호 + PIN) |

### 7.2 학급/학생 관리

| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/api/classes` | 학급 생성 |
| GET | `/api/classes` | 내 학급 목록 |
| POST | `/api/classes/:id/students` | 학생 등록 |
| POST | `/api/classes/:id/students/bulk` | 학생 일괄 등록 (CSV) |
| GET | `/api/classes/:id/students` | 학급 학생 목록 |
| PATCH | `/api/students/:id` | 학생 정보 수정 |
| DELETE | `/api/students/:id` | 학생 삭제 |

### 7.3 감정 피드

| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/api/feeds` | 감정 피드 작성 |
| GET | `/api/feeds/class/:classId` | 학급 피드 타임라인 |
| GET | `/api/feeds/student/:studentId` | 학생별 피드 |
| POST | `/api/feeds/:id/reactions` | 피드 반응 등록 |
| PATCH | `/api/feeds/:id/visibility` | 피드 공개/비공개 (교사) |
| POST | `/api/feeds/:id/comments` | 교사 코멘트 작성 |

### 7.4 계획 관리

| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/api/plans` | 계획 등록 |
| GET | `/api/plans/my` | 내 계획 목록 |
| PATCH | `/api/plans/:id` | 계획 수정 |
| DELETE | `/api/plans/:id` | 계획 삭제 |
| POST | `/api/plans/:id/check` | 오늘 계획 체크/해제 |
| GET | `/api/plans/today` | 오늘의 계획 + 체크 상태 |

### 7.5 통계

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/api/stats/student/:id/monthly` | 학생별 월간 달성률 |
| GET | `/api/stats/student/:id/plans` | 학생별 계획별 달성률 |
| GET | `/api/stats/class/:id/overview` | 학급 전체 달성률 요약 |
| GET | `/api/stats/class/:id/emotions` | 학급 감정 분포 |
| GET | `/api/stats/student/:id/streak` | 연속 달성일 |

---

## 8. 보안 및 개인정보 보호

### 8.1 아동 개인정보 보호

- **최소 정보 수집 원칙**: 이름, 출석번호만 수집 (이메일, 전화번호 수집 안 함)
- **보호자 동의**: 서비스 도입 시 학급 단위 보호자 동의서 절차 안내
- **데이터 보존 기간**: 학기 종료 후 3개월 뒤 자동 삭제 또는 교사 수동 삭제
- **아동 개인정보보호법(개인정보보호법 제39조의3)** 준수

### 8.2 접근 제어

- 교사: 본인 학급의 데이터에만 접근 가능 (Supabase RLS)
- 학생: 본인 학급의 감정 피드만 열람 가능, 타 학급 접근 차단
- 계획 데이터: 본인 것만 열람/수정 가능 (교사는 조회만 가능)

### 8.3 콘텐츠 안전

- 피드 텍스트 금칙어 필터링 (욕설, 부적절한 표현)
- 이미지 업로드 시 파일 형식/크기 제한 (JPG, PNG, 최대 5MB)
- 교사 피드 비공개 처리 권한

---

## 9. 개발 로드맵

### Phase 1 — MVP (4주)

> 핵심 기능만 구현하여 실제 학급에서 테스트

| 주차 | 내용 |
|------|------|
| 1주차 | 프로젝트 세팅, DB 설계, 교사 인증(회원가입/로그인) |
| 2주차 | 학급 생성, 학생 등록, 학생 로그인 |
| 3주차 | 감정 피드 CRUD, 피드 타임라인, 반응 기능 |
| 4주차 | 일일 계획 등록/체크, 매일 리셋 로직, 교사 모니터링 기본 화면 |

**MVP 산출물**: 교사 로그인 → 학급/학생 관리 → 학생 감정 피드 + 계획 체크 가능

### Phase 2 — 통계 & 고도화 (3주)

| 주차 | 내용 |
|------|------|
| 5주차 | 월간 달성률 그래프 (학생용 + 교사용) |
| 6주차 | 교사 통계 대시보드 (개별/전체), 감정 분포 차트 |
| 7주차 | 스트릭 기능, 캘린더 히트맵, PDF 내보내기 |

### Phase 3 — 부가 기능 (2주)

| 주차 | 내용 |
|------|------|
| 8주차 | CSV 일괄 등록, 이미지 업로드, 금칙어 필터, 알림 기능 |
| 9주차 | 반응형 최적화 (모바일), 성능 최적화, QA 및 버그 수정 |

### Phase 4 — 배포 & 운영 (1주)

| 주차 | 내용 |
|------|------|
| 10주차 | 프로덕션 배포, 도메인 연결, 교사 사용 가이드 작성, 피드백 수집 |

---

## 10. 향후 확장 계획

| 기능 | 설명 | 우선순위 |
|------|------|---------|
| **칭찬 배지 시스템** | 연속 달성, 감정 공유 등에 대한 보상 배지 | 높음 |
| **학부모 뷰** | 학부모가 자녀의 감정/계획 현황을 확인하는 읽기 전용 페이지 | 높음 |
| **AI 감정 분석** | 피드 텍스트 기반 감정 트렌드 분석 및 교사 인사이트 제공 | 중간 |
| **학급 간 챌린지** | 학급 단위 목표 달성 챌린지 (예: 이번 주 전원 80% 달성) | 중간 |
| **PWA / 앱 전환** | 모바일 앱 설치 경험 (홈 화면 추가, 푸시 알림) | 중간 |
| **다국어 지원** | 영어, 일본어 등 해외 학교 확장 | 낮음 |

---

## 11. 핵심 비즈니스 규칙 정리

| # | 규칙 |
|---|------|
| 1 | 학생 계정은 교사만 생성할 수 있다 |
| 2 | 학생은 하루 최대 3개의 감정 피드를 작성할 수 있다 |
| 3 | 학생은 최대 5개의 계획을 등록할 수 있다 |
| 4 | 계획의 체크 상태는 매일 자정(00:00) 초기화된다 |
| 5 | 계획 목록 자체는 학생이 삭제하지 않는 한 유지된다 |
| 6 | 감정 피드는 같은 학급 학생들만 열람할 수 있다 |
| 7 | 피드에는 댓글 기능 없이 이모지 반응(4종)만 가능하다 |
| 8 | 교사는 부적절한 피드를 비공개 처리할 수 있다 |
| 9 | 부정적 감정 3일 연속 시 교사에게 알림이 발송된다 |
| 10 | 1개월 이상 데이터 축적 시 달성률 그래프가 활성화된다 |

---

## 부록 A. 감정 이모지 분류 체계

| 코드 | 이모지 | 한글명 | 영문 코드 | 감정 그룹 |
|------|--------|--------|----------|----------|
| E01 | 😊 | 기쁨 | joy | 긍정 |
| E02 | 😆 | 신남 | excited | 긍정 |
| E03 | 😌 | 평온 | calm | 중립 |
| E04 | 🤔 | 고민 | thinking | 중립 |
| E05 | 😴 | 피곤 | tired | 중립 |
| E06 | 😢 | 슬픔 | sad | 부정 |
| E07 | 😠 | 화남 | angry | 부정 |
| E08 | 😰 | 불안 | anxious | 부정 |

---

## 부록 B. 용어 정의

| 용어 | 정의 |
|------|------|
| **학급코드** | 교사가 학급 생성 시 자동 발급되는 6자리 영숫자 코드 (예: ABC123) |
| **PIN** | 학생 로그인용 4자리 숫자 코드, 교사가 초기 발급 |
| **피드** | 학생이 작성하는 감정 표현 게시물 (이모지 + 텍스트 + 이미지) |
| **계획 체크** | 학생이 일일 계획 항목을 완료했음을 표시하는 행위 |
| **달성률** | (완료된 체크 수 / 전체 계획 수) × 100, 일별 또는 월별 산출 |
| **스트릭** | 모든 계획을 100% 달성한 연속 일수 |
| **히트맵** | 캘린더 위에 달성률을 색상 농도로 표현한 시각화 (GitHub 잔디 스타일) |

---

*본 기획서는 초기 버전이며, 실제 개발 착수 전 교사 대상 인터뷰 및 프로토타입 테스트를 통해 보완될 예정입니다.*
